# Playlist queries and mutations

# Public query for getting a single playlist (for share previews, OG tags)
query Playlist($id: String!) {
  playlist(id: $id) {
    id
    title
    description
    artworkUrl
    profileId
    favoriteCount
    followCount
    createdAt
  }
}

query GetUserPlaylists($page: PageInput, $sort: SortPlaylistInput) {
  getUserPlaylists(page: $page, sort: $sort) {
    nodes {
      id
      title
      description
      artworkUrl
      profileId
      favoriteCount
      followCount
      isFavorite
      isFollowed
      createdAt
      updatedAt
      tracks {
        nodes {
          id
          trackId
          playlistId
          createdAt
          sourceType
          externalUrl
          uploadedFileUrl
          title
          artist
          artworkUrl
          duration
          position
        }
        pageInfo {
          hasNextPage
          endCursor
        }
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

mutation CreatePlaylist($input: CreatePlaylistData!) {
  createPlaylist(input: $input) {
    playlist {
      id
      title
      description
      artworkUrl
      profileId
      createdAt
    }
  }
}

mutation UpdatePlaylist($input: EditPlaylistData!) {
  updatePlaylist(input: $input) {
    playlist {
      id
      title
      description
      artworkUrl
    }
  }
}

mutation CreatePlaylistTracks($input: CreatePlaylistTracks!) {
  createPlaylistTracks(input: $input) {
    playlist {
      id
      title
      tracks {
        nodes {
          id
          trackId
          playlistId
        }
      }
    }
  }
}

mutation DeletePlaylistTracks($input: DeletePlaylistTracks!) {
  deletePlaylistTracks(input: $input) {
    playlist {
      id
      tracks {
        nodes {
          id
          trackId
        }
      }
    }
  }
}

mutation TogglePlaylistFavorite($playlistId: String!) {
  togglePlaylistFavorite(playlistId: $playlistId) {
    id
    playlistId
    isFavorite
  }
}

mutation TogglePlaylistFollow($playlistId: String!) {
  togglePlaylistFollow(playlistId: $playlistId) {
    id
    playlistId
    isFollowed
  }
}

mutation DeletePlaylist($playlistId: String!) {
  deletePlaylist(playlistId: $playlistId)
}

# Add external links or uploads to playlist
mutation AddPlaylistItem($input: AddPlaylistItemInput!) {
  addPlaylistItem(input: $input) {
    playlistTrack {
      id
      playlistId
      trackId
      sourceType
      externalUrl
      uploadedFileUrl
      title
      artist
      artworkUrl
      duration
      position
    }
    success
    error
  }
}

# Delete a single playlist item
mutation DeletePlaylistItem($playlistItemId: String!) {
  deletePlaylistItem(playlistItemId: $playlistItemId) {
    success
  }
}

# Reorder playlist items
mutation ReorderPlaylistItems($playlistId: String!, $itemIds: [String!]!) {
  reorderPlaylistItems(playlistId: $playlistId, itemIds: $itemIds) {
    success
  }
}
